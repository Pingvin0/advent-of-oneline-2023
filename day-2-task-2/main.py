print(sum([game['red']*game['blue']*game['green'] for game in [{cube: max([info.get(cube, 0) for info in game[1:]]) for cube in ['red', 'blue', 'green']} for game in [[int(line.split(':')[0].split(' ')[1])] + [dict([[n.split(" ")[1], int(n.split(" ")[0])] for n in f.split(', ')]) for f in [r[1:] if r[0] == " " else r for r in line.split(":")[1][1:].split(";")]] for line in [i.strip() for i in open('input.txt', 'r').read().strip().splitlines()]]]]))